{% extends 'edit_base.html' %}
{% load static %}

{% block title %}
Edit Post - {{ block.super }}
{% endblock %}

{% block content %}

<div class='modal' id='boldModal'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header bg-dark text-white'>
				<div class='modal-title'><h2>Bold</h2></div>
				<button class='close text-white' data-dismiss='modal'>&times;</button>
			</div>
			<form class='form-group'>
			<div class='modal-body'>
				<textarea class='form-control' id='boldContent' autofocus></textarea>
			</div>
			<div class='modal-footer bg-light'>
				<button class='btn btn-secondary' data-dismiss='modal'>Cancel</button>
				<button class='btn btn-primary' type='button' id='boldButton' data-dismiss='modal'>Bold it</button>
			</div>
			</form>
		</div>
	</div>
</div>

<div class='modal' id='urlModal'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header bg-dark text-white'>
				<h2>URL</h2>
				<button class='close text-white' data-dismiss='modal'>&times;</button>
			</div>
			<form class='form-group'>
				<div class='modal-body'>
					<div class='input-group'>
						<div class='input-group-prepend'><span class='input-group-text'>Title:</span></div>
						<input type='url' class='form-control' placeholder="e.g. Google" id='urlTitle'>
					</div>
					<div class='input-group'>
						<div class='input-group-prepend'><span class='input-group-text'>Link:</span></div>
						<input type='url' class='form-control' placeholder="e.g. http://google.com" id='urlContent' autofocus>
					</div>
				</div>		
				<div class='modal-footer bg-light'>
					<button class='btn btn-secondary' data-dismiss='modal'>Cancel</button>
					<button class='btn btn-primary' type='button' id='urlButton' data-dismiss='modal'>Add</button>
				</div>
			</form>
		</div>
	</div>
</div>

<div class='modal' id='imgModal'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header bg-dark text-white'>
				<h2>Image Link</h2>
				<buttton class='close text-white' data-dismiss='modal'>&times;</buttton>
			</div>
			<div class='modal-body'>
				<div class='modal-body'>
					<input class='form-control' type='url' placeholder="e.g. http://www.example.com/image.jpg" id='imgContent'>
				</div>
			</div>
			<div class='modal-footer'>
				<button type='button' class='btn btn-secondary' data-dismiss='modal'>Cancel</button>
				<button type='button' class='btn btn-primary' id='imgButton' data-dismiss='modal'>Add Img Link</button>
			</div>
		</div>
	</div>
</div>

<div class='modal' id='kbdModal'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header bg-dark text-white'><h2>KBD Tag</h2></div>
			<form class='form-group'>
				<div class='modal-body'>
					<input type='text' class='form-control' id='kbdContent' autofocus placeholder="e.g. a sentence of code...">		
				</div>
				<div class='modal-footer bg-light'>
					<button class='btn btn-secondary' data-dismiss='modal'>Cancel</button>
					<button class='btn btn-primary' type='button' id='kbdButton' data-dismiss='modal'>Add</button>
				</div>
			</form>
		</div>
	</div>
</div>

<div class='modal' id='snippetModal'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header bg-dark text-white'>
				<div class='modal-title'><h2>Snippet</h2></div>
				<button class='close text-white' data-dismiss='modal'>&times;</button>
			</div>
			<form class='form-group'>
			<div class='modal-body'>
				<select class='custom-select' id='lang'>
					<option value='' selected>Select Language</option>
					<option value='css'>CSS</option>
					<option value='html'>HTML5</option>
					<option value='javascript'>Javascript</option>
					<option value='python'>Python3</option>
				</select>
				<div class='rowspace'></div>
				<div id='editor' class='form-control'></div>
			</div>
			<div class='modal-footer bg-light'>
				<button class='btn btn-warning d-none' type='button' id='htmlEscape' data-toggle='tooltip' data-placement='left' title='Click to escape HTML before submitting this snippet'>Escape Html</button>
				<button class='btn btn-secondary' data-dismiss='modal'>Cancel</button>
				<button class='btn btn-primary' type='button' id='snippetButton' data-dismiss='modal'>Insert Snippet</button>
			</div>
			</form>
		</div>
	</div>
</div>

<div class='modal' id='deleteModal'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-body bg-danger text-white'>
				<h4>
					<p>You are going to delete this post.</p>
					<p>Are you sure?</p>
				</h4>
			</div>
			<div class='modal-footer'>
				<button type='button' class='btn btn-secondary' data-dismiss='modal'>Cancel</button>
				<a href='{% url "post_delete" key=post.pk %}'>
					<button type='button' class='btn btn-danger'>Delete</button>
				</a>
			</div>
		</div>
	</div>	
</div>

<div class='row'>
	<div class='col-12'>
		<div class='card'>
			<div class='card-header d-flex justify-content-center bg-dark text-white'><h1>Edit Post</h1></div>
			<form method='POST'>
				{% csrf_token %}
				<div class='card-body'>
					{% for field in form %}
					{% if field.name == 'content' %}
					<div class='row mb-3'>
						<dt class='col-12 col-lg-3'><label>Tools:</label></dt>
						<dd class='col-12 col-lg-9 posttools d-flex justify-content-center bg-light'>
							<button type='button' class='btn btn-sm btn-light mr-2' id='bold'>B</button>
							<button type='button' class='btn btn-sm btn-light mr-2' id='line'>Line</button>
							<button type='button' class='btn btn-sm btn-light mr-2' id='url'>Url</button>
							<button type='button' class='btn btn-sm btn-light mr-2' id='img'>Img</button>
							<button type='button' class='btn btn-sm btn-light mr-2' id='kbd'>kbd</button>
							<button type='button' class='btn btn-sm btn-light mr-2' id='snippet'>Snippet</button>
						</dd>
					</div>
					{% endif %}
					<div class='row form-group'>
						<dt class='col-12 col-lg-3'>
							<label for='{{ field.name }}'>{{ field.label_tag }}</label>
						</dt>
						<dd class='col-12 col-lg-9'>{{ field }}</dd>
						{% if field.help_text %}
						<dt class='col col-lg-3'></dt>
						<dd class='col-12 col-lg-9 form-text'>{{ field.help_text }}</dd>
						{% endif %}
					</div>
					{% endfor %}
				</div>
				<div class='card-footer'>
					<div class='row'>
						<div class='col-12 mb-2'>
							<button type='submit' class='btn btn-info btn-block'>Update Post</button>
						</div>
						<div class='col-12'>
							<button type='button' class='btn btn-danger btn-block' id='delete'>Delete Post</button>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>

<script src="{% static 'js/ace/src-noconflict/ace.js' %}" type="text/javascript" charset="utf-8"></script>
<script src="{% static 'js/posttools.js' %}"></script>
{% endblock %}